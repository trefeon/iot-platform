# Cloudflare Access Configuration for IoT Platform
# Copy this to your .env file and update with your actual values

# =============================================================================
# CLOUDFLARE ACCESS CONFIGURATION
# =============================================================================

# Your domain name
DOMAIN=trefeon.site

# Cloudflare Access Team Domain (find this in Zero Trust dashboard)
# Format: https://YOUR-TEAM-NAME.cloudflareaccess.com
CF_ACCESS_TEAM_DOMAIN=https://your-team.cloudflareaccess.com

# Cloudflare Access Certificate URL
# This URL provides public keys for JWT verification
CF_ACCESS_CERTS=https://your-team.cloudflareaccess.com/cdn-cgi/access/certs

# Application Audience ID (AUD)
# Get this from each Cloudflare Access application you created
# All applications can use the same AUD if they're under the same policy
CF_ACCESS_AUD=your-application-audience-id

# =============================================================================
# HOW TO GET THESE VALUES:
# =============================================================================

# 1. CF_ACCESS_TEAM_DOMAIN:
#    - Go to https://one.dash.cloudflare.com/
#    - Look at the URL or check Settings > Authentication > Login methods
#    - Format: https://YOUR-TEAM-NAME.cloudflareaccess.com

# 2. CF_ACCESS_CERTS:
#    - Replace YOUR-TEAM-NAME with your actual team name from step 1
#    - Format: https://YOUR-TEAM-NAME.cloudflareaccess.com/cdn-cgi/access/certs

# 3. CF_ACCESS_AUD:
#    - Go to Access > Applications in Cloudflare Zero Trust dashboard
#    - Click on any of your IoT Platform applications
#    - Copy the "Application Audience (AUD)" value
#    - All apps can share the same AUD value

# =============================================================================
# EXAMPLE VALUES (REPLACE WITH YOUR ACTUAL VALUES):
# =============================================================================

# DOMAIN=trefeon.site
# CF_ACCESS_TEAM_DOMAIN=https://mycompany.cloudflareaccess.com
# CF_ACCESS_CERTS=https://mycompany.cloudflareaccess.com/cdn-cgi/access/certs
# CF_ACCESS_AUD=abc123def456ghi789jkl012mno345pqr678stu901vwx234yz

# =============================================================================
# SECURITY NOTES:
# =============================================================================

# - Only trefeon@gmail.com has access to protected domains
# - demo.yourdomain.com remains publicly accessible
# - control.yourdomain.com requires authentication
# - admin.yourdomain.com requires authentication
# - mqtt.yourdomain.com requires authentication for WebSocket connections

# =============================================================================
# TESTING YOUR CONFIGURATION:
# =============================================================================

# 1. After updating these values, restart your API service:
#    docker compose build api && docker compose up -d api

# 2. Test access:
#    - https://demo.trefeon.site (should work immediately)
#    - https://control.trefeon.site (should prompt for Google login)
#    - https://admin.trefeon.site (should prompt for Google login)

# 3. When prompted, use trefeon@gmail.com - other emails will be denied
